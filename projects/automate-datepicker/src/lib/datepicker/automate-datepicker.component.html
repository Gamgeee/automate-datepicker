<div class="automate-datepicker" [ngClass]="theme">
    <div class="append-to-container" (click)="toggle()">
        <div class="append-to-wrapper" #appendToTmpWrapper>
            <ng-template #defaultAppendToTemplate>
                <input [id]="id" class="datepicker-input" [placeholder]="placeholder" [ngModel]="formattedDate"
                    #datepickerInput />
            </ng-template>

            <ng-template [ngTemplateOutletContext]="{ date: model, formattedDate: formattedDate, config: config }"
                [ngTemplateOutlet]="appendToTemplate?.template || defaultAppendToTemplate">
            </ng-template>
        </div>
    </div>

    <automate-datepicker-calendar-container [theme]="theme" [appendTo]="appendToTemplateWrapper" [container]="container"
        [placement]="placement" *ngIf="isOpen && container !== 'body'">
        <automate-datepicker-calendar [config]="config" [selectedDate]="model" (onDaySelected)="daySelected($event)"
            (onMonthChanged)="onMonthChanged.emit($event)" (onYearChanged)="onYearChanged.emit($event)">
        </automate-datepicker-calendar>

        <ng-template *ngIf="footerTemplate" [ngTemplateOutlet]="footerTemplate">
        </ng-template>
    </automate-datepicker-calendar-container>
</div>